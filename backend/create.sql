create table tb_category (id bigint generated by default as identity, created_at TIMESTAMP WITHOUT TIME ZONE, name varchar(255), updated_at TIMESTAMP WITHOUT TIME ZONE, primary key (id));
create table tb_product (id bigint generated by default as identity, date TIMESTAMP WITHOUT TIME ZONE, description TEXT, img_url varchar(255), name varchar(255), price double, primary key (id));
create table tb_product_category (product_id bigint not null, category_id bigint not null, primary key (product_id, category_id));
create table tb_role (id bigint generated by default as identity, authority varchar(255), primary key (id));
create table tb_route (id bigint generated by default as identity, name varchar(255), user_id bigint, primary key (id));
create table tb_sale (id bigint generated by default as identity, value double, user_id bigint, primary key (id));
create table tb_sale_product (sale_id bigint not null, product_id bigint not null);
create table tb_target (id bigint generated by default as identity, amount integer, value double, user_id bigint, primary key (id));
create table tb_user (id bigint generated by default as identity, name varchar(255), password varchar(255), primary key (id));
create table tb_user_role (user_id bigint not null, role_id bigint not null, primary key (user_id, role_id));
alter table tb_user add constraint UK_jus3xa0l3009mkpbt9i5ilxx3 unique (name);
alter table tb_product_category add constraint FK5r4sbavb4nkd9xpl0f095qs2a foreign key (category_id) references tb_category;
alter table tb_product_category add constraint FKgbof0jclmaf8wn2alsoexxq3u foreign key (product_id) references tb_product;
alter table tb_route add constraint FK80kkr3h8bm5j1dj2wj9mgjvlp foreign key (user_id) references tb_user;
alter table tb_sale add constraint FKdk083qv7r66pevah70o3sqkbj foreign key (user_id) references tb_user;
alter table tb_sale_product add constraint FKae9gvtvx0hc87q9acjqcb7am1 foreign key (product_id) references tb_product;
alter table tb_sale_product add constraint FKs13t6mnc5eto5iwyldcb4bkf7 foreign key (sale_id) references tb_sale;
alter table tb_target add constraint FKs8nuqb9r6ndtr4rxr2aiqe799 foreign key (user_id) references tb_user;
alter table tb_user_role add constraint FKea2ootw6b6bb0xt3ptl28bymv foreign key (role_id) references tb_role;
alter table tb_user_role add constraint FK7vn3h53d0tqdimm8cp45gc0kl foreign key (user_id) references tb_user;
