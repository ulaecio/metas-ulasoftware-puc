{"ast":null,"code":"import _objectSpread from\"C:/workspace/ws-sts/ulasoftware-metas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/workspace/ws-sts/ulasoftware-metas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{useForm}from'react-hook-form';import{useHistory,useLocation}from'react-router';import{requestBackendLogin}from'utils/request';import{/*getAuthData,*/saveAuthData}from'utils/storage';import ButtonIcon from'../../../components/ButtonIcon';import'./styles.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(){var _errors$username,_errors$password;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),hasError=_useState2[0],setHasError=_useState2[1];var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var history=useHistory();var location=useLocation();var _ref=location.state||{from:{pathname:'/admin'}},from=_ref.from;var onSubmit=function onSubmit(formData){requestBackendLogin(formData).then(function(response){saveAuthData(response.data);// const tokenData = getAuthData(),\nsetHasError(false);// console.log('SUCESSO', response);\nhistory.replace(from);}).catch(function(error){setHasError(true);//console.log('ERRO', error);\n});};return/*#__PURE__*/_jsx(\"div\",{className:\"container-login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\" base-card text-center align-items-center\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-primary text-center display-flex\",children:\"Entrar\"}),hasError&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger mb-2\",children:\"Usu\\xE1rio ou senha inv\\xE1lido!\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register('username',{required:'*Campo obrigatório'})),{},{type:\"text\",className:\"form-control base-input \".concat(errors.username?'is-invalid':''),placeholder:\"Digite sua rota\",name:\"username\"})),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback d-block\",children:(_errors$username=errors.username)===null||_errors$username===void 0?void 0:_errors$username.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register('password',{required:'*Campo obrigatório'})),{},{type:\"password\",className:\"form-control base-input \".concat(errors.password?'is-invalid':''),placeholder:\"Senha. Exemplo: 111@1970\",name:\"password\"})),/*#__PURE__*/_jsxs(\"span\",{className:\"not-registered text-secondary text-info-senha\",children:[/*#__PURE__*/_jsx(\"i\",{children:\"*A senha \\xE9 formada por numeros\"}),\".\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback d-block\",children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"link\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-submit\",children:[/*#__PURE__*/_jsx(ButtonIcon,{text:\"Fazer login\"}),/*#__PURE__*/_jsx(\"span\",{className:\"not-registered\",children:\"N\\xE3o tem cadastro?\"})]})]})]})]})]})});};export default Login;","map":{"version":3,"sources":["C:/workspace/ws-sts/ulasoftware-metas/frontend/src/pages/Auth/Login/index.tsx"],"names":["useState","useForm","useHistory","useLocation","requestBackendLogin","saveAuthData","ButtonIcon","Login","hasError","setHasError","register","handleSubmit","errors","formState","history","location","state","from","pathname","onSubmit","formData","then","response","data","replace","catch","error","required","username","message","password"],"mappings":"yUAAA,OAASA,QAAT,KAAyB,OAAzB,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA,OAASC,UAAT,CAAqBC,WAArB,KAAwC,cAAxC,CACA,OAASC,mBAAT,KAAoC,eAApC,CACA,OAAS,gBAAiBC,YAA1B,KAA8C,eAA9C,CACA,MAAOC,CAAAA,UAAP,KAAuB,gCAAvB,CACA,MAAO,cAAP,C,wFAWA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,EAAM,qDACgBP,QAAQ,CAAC,KAAD,CADxB,wCACTQ,QADS,eACCC,WADD,4BAG0CR,OAAO,EAHjD,CAGRS,QAHQ,UAGRA,QAHQ,CAGEC,YAHF,UAGEA,YAHF,CAG6BC,MAH7B,UAGgBC,SAHhB,CAG6BD,MAH7B,CAKhB,GAAME,CAAAA,OAAO,CAAGZ,UAAU,EAA1B,CAEA,GAAIa,CAAAA,QAAQ,CAAGZ,WAAW,EAA1B,CAPgB,SASCY,QAAQ,CAACC,KAAT,EAAkB,CAAEC,IAAI,CAAE,CAAEC,QAAQ,CAAE,QAAZ,CAAR,CATnB,CASRD,IATQ,MASRA,IATQ,CAWhB,GAAME,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,QAAD,CAAwB,CACrChB,mBAAmB,CAACgB,QAAD,CAAnB,CACKC,IADL,CACU,SAAAC,QAAQ,CAAI,CACdjB,YAAY,CAACiB,QAAQ,CAACC,IAAV,CAAZ,CACA;AACAd,WAAW,CAAC,KAAD,CAAX,CACA;AACAK,OAAO,CAACU,OAAR,CAAgBP,IAAhB,EACH,CAPL,EAQKQ,KARL,CAQW,SAAAC,KAAK,CAAI,CACZjB,WAAW,CAAC,IAAD,CAAX,CACA;AACH,CAXL,EAYH,CAbD,CAcA,mBACI,YAAK,SAAS,CAAC,iBAAf,uBACI,aAAK,SAAS,CAAC,2CAAf,wBACI,WAAI,SAAS,CAAC,uCAAd,oBADJ,CAGKD,QAAQ,eACL,YAAM,SAAS,CAAC,yBAAhB,8CAJR,cASI,cAAM,QAAQ,CAAEG,YAAY,CAACQ,QAAD,CAA5B,wBACI,aAAK,SAAS,CAAC,MAAf,wBACI,4CACQT,QAAQ,CAAC,UAAD,CAAa,CACrBiB,QAAQ,CAAE,oBADW,CAAb,CADhB,MAII,IAAI,CAAC,MAJT,CAKI,SAAS,mCAA6Bf,MAAM,CAACgB,QAAP,CAAkB,YAAlB,CAAiC,EAA9D,CALb,CAMI,WAAW,CAAC,iBANhB,CAOI,IAAI,CAAC,UAPT,GADJ,cAUI,YAAK,SAAS,CAAC,0BAAf,4BAA2ChB,MAAM,CAACgB,QAAlD,2CAA2C,iBAAiBC,OAA5D,EAVJ,GADJ,cAaI,aAAK,SAAS,CAAC,MAAf,wBACI,4CACQnB,QAAQ,CAAC,UAAD,CAAa,CACrBiB,QAAQ,CAAE,oBADW,CAAb,CADhB,MAII,IAAI,CAAC,UAJT,CAKI,SAAS,mCAA6Bf,MAAM,CAACkB,QAAP,CAAkB,YAAlB,CAAiC,EAA9D,CALb,CAMI,WAAW,CAAC,0BANhB,CAOI,IAAI,CAAC,UAPT,GADJ,cAUI,cAAM,SAAS,CAAC,+CAAhB,wBACI,wDADJ,OAVJ,cAYI,YAAK,SAAS,CAAC,0BAAf,4BAA2ClB,MAAM,CAACkB,QAAlD,2CAA2C,iBAAiBD,OAA5D,EAZJ,cAaI,oCACI,eADJ,cAGI,aAAK,SAAS,CAAC,cAAf,wBACI,KAAC,UAAD,EAAY,IAAI,CAAC,aAAjB,EADJ,cAEI,aAAM,SAAS,CAAC,gBAAhB,kCAFJ,GAHJ,GAbJ,GAbJ,GATJ,GADJ,EADJ,CAmDH,CA5ED,CA8EA,cAAetB,CAAAA,KAAf","sourcesContent":["import { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { useHistory, useLocation } from 'react-router';\r\nimport { requestBackendLogin } from 'utils/request';\r\nimport { /*getAuthData,*/ saveAuthData } from 'utils/storage';\r\nimport ButtonIcon from '../../../components/ButtonIcon';\r\nimport './styles.css';\r\n\r\ntype FormData = {\r\n    username: string;\r\n    password: string;\r\n}\r\n\r\ntype LocationState = {\r\n    from: string;\r\n}\r\n\r\nconst Login = () => {\r\n    const [hasError, setHasError] = useState(false);\r\n\r\n    const { register, handleSubmit, formState: { errors } } = useForm<FormData>();\r\n\r\n    const history = useHistory();\r\n\r\n    let location = useLocation<LocationState>();\r\n\r\n    const { from } = location.state || { from: { pathname: '/admin' } };\r\n\r\n    const onSubmit = (formData: FormData) => {\r\n        requestBackendLogin(formData)\r\n            .then(response => {\r\n                saveAuthData(response.data)\r\n                // const tokenData = getAuthData(),\r\n                setHasError(false);\r\n                // console.log('SUCESSO', response);\r\n                history.replace(from);\r\n            })\r\n            .catch(error => {\r\n                setHasError(true)\r\n                //console.log('ERRO', error);\r\n            });\r\n    };\r\n    return (\r\n        <div className='container-login'>\r\n            <div className=' base-card text-center align-items-center'>\r\n                <h1 className='text-primary text-center display-flex'>\r\n                    Entrar</h1>\r\n                {hasError && (\r\n                    < div className='alert alert-danger mb-2'>\r\n                        Usuário ou senha inválido!\r\n                    </div>\r\n                )\r\n                }\r\n                <form onSubmit={handleSubmit(onSubmit)}>\r\n                    <div className='mb-4'>\r\n                        <input\r\n                            {...register('username', {\r\n                                required: '*Campo obrigatório'\r\n                            })}\r\n                            type='text'\r\n                            className={`form-control base-input ${errors.username ? 'is-invalid' : ''}`}\r\n                            placeholder='Digite sua rota'\r\n                            name='username'\r\n                        />\r\n                        <div className='invalid-feedback d-block'>{errors.username?.message}</div>\r\n                    </div>\r\n                    <div className='mb-2'>\r\n                        <input\r\n                            {...register('password', {\r\n                                required: '*Campo obrigatório'\r\n                            })}\r\n                            type='password'\r\n                            className={`form-control base-input ${errors.password ? 'is-invalid' : ''}`}\r\n                            placeholder='Senha. Exemplo: 111@1970'\r\n                            name='password'\r\n                        />\r\n                        <span className='not-registered text-secondary text-info-senha'>\r\n                            <i>*A senha é formada por numeros</i>.</span>\r\n                        <div className='invalid-feedback d-block'>{errors.password?.message}</div>\r\n                        <div>\r\n                            <link>\r\n                            </link>\r\n                            <div className='login-submit'>\r\n                                <ButtonIcon text='Fazer login' />\r\n                                <span className='not-registered'>Não tem cadastro?\r\n                                    {/* <a href=\"https://api.whatsapp.com/send?phone=+559891076037&text=Ol%C3%A1!%20N%C3%A3o%20consigo%20acessar%20minha%20rota%20no%20*Farol%20de%20Vendas*\" target=''>Clique aqui</a> */}</span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n            </div >\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}