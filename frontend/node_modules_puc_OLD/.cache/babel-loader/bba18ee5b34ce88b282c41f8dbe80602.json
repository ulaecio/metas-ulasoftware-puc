{"ast":null,"code":"import _objectSpread from\"C:/workspace/ws-sts/ulasoftware-metas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/workspace/ws-sts/ulasoftware-metas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import{useState,useEffect}from'react';import Chart from'react-apexcharts';import{getTokenData}from'utils/auth';import{getAuthData}from'utils/storage';import{BASE_URL}from'../../utils/request';import*as ReactBootStrap from'react-bootstrap';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var DonutChart2=function DonutChart2(){//DADOS DINAMICOS\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({labels:[],series:[]}),_useState4=_slicedToArray(_useState3,2),chartData=_useState4[0],setChartData=_useState4[1];useEffect(function(){var _getTokenData;axios.get(\"\".concat(BASE_URL,\"/vendas/venda-embalagem?rota=\").concat((_getTokenData=getTokenData())===null||_getTokenData===void 0?void 0:_getTokenData.user_name),{headers:{Authorization:\"Bearer \"+getAuthData().access_token}}).then(function(response){var data=response.data;var myLabels=data.map(function(x){return x.embalagem;});var mySeries=data.map(function(x){return x.volume;});setChartData({labels:myLabels,series:mySeries});setLoading(true);});},[]);var options={legend:{show:true}};return/*#__PURE__*/_jsx(_Fragment,{children:loading?chartData.labels.length&&chartData.series&&/*#__PURE__*/ // @ts-ignore\n_jsx(Chart,{options:_objectSpread(_objectSpread({},options),{},{labels:chartData.labels}),series:chartData.series,type:\"donut\",height:\"240\"}):/*#__PURE__*/_jsx(\"div\",{className:\"display-flex \",children:/*#__PURE__*/_jsx(ReactBootStrap.Spinner,{className:\"spinner\",animation:\"border\",variant:\"warning\",role:\"status ml\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})})})});};export default DonutChart2;","map":{"version":3,"sources":["C:/workspace/ws-sts/ulasoftware-metas/frontend/src/components/DonutChart2/index.tsx"],"names":["axios","useState","useEffect","Chart","getTokenData","getAuthData","BASE_URL","ReactBootStrap","DonutChart2","loading","setLoading","labels","series","chartData","setChartData","get","user_name","headers","Authorization","access_token","then","response","data","myLabels","map","x","embalagem","mySeries","volume","options","legend","show","length"],"mappings":"yUAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAOC,CAAAA,KAAP,KAAkB,kBAAlB,CACA,OAASC,YAAT,KAA6B,YAA7B,CACA,OAASC,WAAT,KAA4B,eAA5B,CAEA,OAASC,QAAT,KAAyB,qBAAzB,CACA,MAAO,GAAKC,CAAAA,cAAZ,KAAgC,iBAAhC,C,gGAQA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACtB;AADsB,cAEQP,QAAQ,CAAC,KAAD,CAFhB,wCAEfQ,OAFe,eAENC,UAFM,8BAGYT,QAAQ,CAAY,CAAEU,MAAM,CAAE,EAAV,CAAcC,MAAM,CAAE,EAAtB,CAAZ,CAHpB,yCAGfC,SAHe,eAGJC,YAHI,eAKtBZ,SAAS,CAAC,UAAM,mBACZF,KAAK,CAACe,GAAN,WAAaT,QAAb,wDAAqDF,YAAY,EAAjE,wCAAqD,cAAgBY,SAArE,EAAkF,CAAEC,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAYb,WAAW,GAAGc,YAA3C,CAAX,CAAlF,EACKC,IADL,CACU,SAACC,QAAD,CAAc,CAChB,GAAMC,CAAAA,IAAI,CAAGD,QAAQ,CAACC,IAAtB,CACA,GAAMC,CAAAA,QAAQ,CAAGD,IAAI,CAACE,GAAL,CAAS,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACC,SAAN,EAAV,CAAjB,CACA,GAAMC,CAAAA,QAAQ,CAAGL,IAAI,CAACE,GAAL,CAAS,SAAAC,CAAC,QAAIA,CAAAA,CAAC,CAACG,MAAN,EAAV,CAAjB,CAEAd,YAAY,CAAC,CAAEH,MAAM,CAAEY,QAAV,CAAoBX,MAAM,CAAEe,QAA5B,CAAD,CAAZ,CACAjB,UAAU,CAAC,IAAD,CAAV,CACH,CARL,EASH,CAVQ,CAUN,EAVM,CAAT,CAYA,GAAMmB,CAAAA,OAAO,CAAG,CACZC,MAAM,CAAE,CACJC,IAAI,CAAE,IADF,CADI,CAAhB,CAMA,mBACI,yBACKtB,OAAO,CAEAI,SAAS,CAACF,MAAV,CAAiBqB,MAAjB,EAA2BnB,SAAS,CAACD,MAArC,gBACI;AACA,KAAC,KAAD,EACI,OAAO,gCAAOiB,OAAP,MAAgBlB,MAAM,CAAEE,SAAS,CAACF,MAAlC,EADX,CAEI,MAAM,CAAEE,SAAS,CAACD,MAFtB,CAGI,IAAI,CAAC,OAHT,CAII,MAAM,CAAC,KAJX,EAJJ,cAWJ,YAAK,SAAS,CAAC,eAAf,uBACI,KAAC,cAAD,CAAgB,OAAhB,EAAwB,SAAS,CAAC,SAAlC,CAA4C,SAAS,CAAC,QAAtD,CAA+D,OAAO,CAAC,SAAvE,CAAiF,IAAI,CAAC,WAAtF,uBACI,aAAM,SAAS,CAAC,iBAAhB,wBADJ,EADJ,EAZR,EADJ,CAqBH,CA5CD,CA8CA,cAAeJ,CAAAA,WAAf","sourcesContent":["import axios from 'axios';\r\nimport { useState, useEffect } from 'react';\r\nimport Chart from 'react-apexcharts';\r\nimport { getTokenData } from 'utils/auth';\r\nimport { getAuthData } from 'utils/storage';\r\nimport { vendasPorEmbalagem } from '../../types/sales';\r\nimport { BASE_URL } from '../../utils/request';\r\nimport * as ReactBootStrap from 'react-bootstrap';\r\n\r\n\r\ntype ChartData = {\r\n    labels: string[];\r\n    series: number[];\r\n}\r\n\r\nconst DonutChart2 = () => {\r\n    //DADOS DINAMICOS\r\n    const [loading, setLoading] = useState(false);\r\n    const [chartData, setChartData] = useState<ChartData>({ labels: [], series: [] });\r\n\r\n    useEffect(() => {\r\n        axios.get(`${BASE_URL}/vendas/venda-embalagem?rota=${getTokenData()?.user_name}`, { headers: { Authorization: \"Bearer \" + getAuthData().access_token } })\r\n            .then((response) => {\r\n                const data = response.data as vendasPorEmbalagem[];\r\n                const myLabels = data.map(x => x.embalagem)\r\n                const mySeries = data.map(x => x.volume);\r\n\r\n                setChartData({ labels: myLabels, series: mySeries });\r\n                setLoading(true);\r\n            })\r\n    }, []);\r\n\r\n    const options = {\r\n        legend: {\r\n            show: true\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {loading ? (\r\n                \r\n                    chartData.labels.length && chartData.series &&\r\n                        // @ts-ignore\r\n                        <Chart\r\n                            options={{ ...options, labels: chartData.labels }}\r\n                            series={chartData.series}\r\n                            type='donut'\r\n                            height='240'\r\n                        />\r\n        ) : (\r\n                <div className='display-flex '>\r\n                    <ReactBootStrap.Spinner className='spinner' animation='border' variant='warning' role='status ml'>\r\n                        <span className='visually-hidden'>Loading...</span>\r\n                    </ReactBootStrap.Spinner>\r\n                </div>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default DonutChart2;"]},"metadata":{},"sourceType":"module"}