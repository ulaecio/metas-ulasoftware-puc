{"ast":null,"code":"import _slicedToArray from\"C:/workspace/ws-sts/ulasoftware-metas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import{useState,useEffect}from'react';import{getTokenData}from'utils/auth';import{formatPrice}from'utils/format';import{BASE_URL}from'utils/request';import{getAuthData}from'utils/storage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DataCalc=function DataCalc(){var current=new Date();/*//////VALORESTÁTICO///////*/var date=\"\".concat(current.getDate()+3);var month=\"\".concat(current.getMonth()+1);var fullYear=\"\".concat(current.getFullYear());/*const result = current.getTime(); */var getDaysInMonth=function getDaysInMonth(month,fullYear){return new Date(fullYear,month,0).getDate();};var IntDate=parseInt(date);var untilDays=getDaysInMonth(parseInt(month),parseInt(fullYear));var workedDays=IntDate-untilDays/7.5;var _useState=useState(),_useState2=_slicedToArray(_useState,2),venda=_useState2[0],setVenda=_useState2[1];useEffect(function(){var _getTokenData;axios.get(\"\".concat(BASE_URL,\"/vendas/total-vendas-rota?rota=\").concat((_getTokenData=getTokenData())===null||_getTokenData===void 0?void 0:_getTokenData.user_name),{headers:{Authorization:\"Bearer \"+getAuthData().access_token}}).then(function(response){setVenda(response.data);});},[]);return/*#__PURE__*/_jsx(\"div\",{id:\"accordion\",children:venda===null||venda===void 0?void 0:venda.content.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"card m-3\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-header bg-light text-primary text-uppercase\",children:\"Tendencia\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"m-0 d-flex justify-content-center\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"m-3\",children:formatPrice(item.totalvenda/workedDays*untilDays)}),/*#__PURE__*/_jsx(\"span\",{className:\"mt-3 mb-3 border-end d-flex flex-wrap\"})]})]},item.totalvenda);})});};export default DataCalc;","map":{"version":3,"sources":["C:/workspace/ws-sts/ulasoftware-metas/frontend/src/components/DataCalc/index.tsx"],"names":["axios","useState","useEffect","getTokenData","formatPrice","BASE_URL","getAuthData","DataCalc","current","Date","date","getDate","month","getMonth","fullYear","getFullYear","getDaysInMonth","IntDate","parseInt","untilDays","workedDays","venda","setVenda","get","user_name","headers","Authorization","access_token","then","response","data","content","map","item","totalvenda"],"mappings":"qKAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CAGA,OAASC,YAAT,KAA6B,YAA7B,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OAASC,QAAT,KAAyB,eAAzB,CACA,OAASC,WAAT,KAA4B,eAA5B,C,wFAEA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,EAAM,CACnB,GAAMC,CAAAA,OAAO,CAAG,GAAIC,CAAAA,IAAJ,EAAhB,CACA,8BACA,GAAMC,CAAAA,IAAI,WAAMF,OAAO,CAACG,OAAR,GAAoB,CAA1B,CAAV,CACA,GAAMC,CAAAA,KAAK,WAAMJ,OAAO,CAACK,QAAR,GAAqB,CAA3B,CAAX,CACA,GAAMC,CAAAA,QAAQ,WAAMN,OAAO,CAACO,WAAR,EAAN,CAAd,CACA,sCAEA,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACJ,KAAD,CAAgBE,QAAhB,CAAqC,CACxD,MAAO,IAAIL,CAAAA,IAAJ,CAASK,QAAT,CAAmBF,KAAnB,CAA0B,CAA1B,EAA6BD,OAA7B,EAAP,CACH,CAFD,CAIA,GAAMM,CAAAA,OAAO,CAAGC,QAAQ,CAACR,IAAD,CAAxB,CACA,GAAMS,CAAAA,SAAS,CAAGH,cAAc,CAACE,QAAQ,CAACN,KAAD,CAAT,CAAkBM,QAAQ,CAACJ,QAAD,CAA1B,CAAhC,CACA,GAAMM,CAAAA,UAAU,CAAGH,OAAO,CAAGE,SAAS,CAAG,GAAzC,CAdmB,cAiBOlB,QAAQ,EAjBf,wCAiBZoB,KAjBY,eAiBLC,QAjBK,eAmBnBpB,SAAS,CAAC,UAAM,mBACZF,KAAK,CAACuB,GAAN,WAAalB,QAAb,0DAAuDF,YAAY,EAAnE,wCAAuD,cAAgBqB,SAAvE,EACI,CAAEC,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAYpB,WAAW,GAAGqB,YAA3C,CAAX,CADJ,EAEKC,IAFL,CAEU,SAACC,QAAD,CAAc,CAChBP,QAAQ,CAACO,QAAQ,CAACC,IAAV,CAAR,CACH,CAJL,EAKH,CANQ,CAMN,EANM,CAAT,CAQA,mBACI,YAAK,EAAE,CAAC,WAAR,UACKT,KADL,SACKA,KADL,iBACKA,KAAK,CAAEU,OAAP,CAAeC,GAAf,CAAmB,SAAAC,IAAI,qBACpB,aAA2B,SAAS,CAAC,UAArC,wBACI,WAAI,SAAS,CAAC,kDAAd,uBADJ,cAEI,aAAK,SAAS,CAAC,mCAAf,wBACI,WAAI,SAAS,CAAC,KAAd,UAAqB7B,WAAW,CAAE6B,IAAI,CAACC,UAAL,CAAkBd,UAAnB,CAAiCD,SAAlC,CAAhC,EADJ,cAEI,aAAM,SAAS,CAAC,uCAAhB,EAFJ,GAFJ,GAAUc,IAAI,CAACC,UAAf,CADoB,EAAvB,CADL,EADJ,CAiBH,CA5CD,CA8CA,cAAe3B,CAAAA,QAAf","sourcesContent":["import axios from 'axios';\r\nimport { useState, useEffect } from 'react';\r\nimport { VendaTotalPorRota } from 'types/sales';\r\nimport { springPage } from 'types/vendor/springPage';\r\nimport { getTokenData } from 'utils/auth';\r\nimport { formatPrice } from 'utils/format';\r\nimport { BASE_URL } from 'utils/request';\r\nimport { getAuthData } from 'utils/storage';\r\n\r\nconst DataCalc = () => {\r\n    const current = new Date();\r\n    /*//////VALORESTÁTICO///////*/\r\n    const date = `${current.getDate() + 3}`;\r\n    const month = `${current.getMonth() + 1}`;\r\n    const fullYear = `${current.getFullYear()}`;\r\n    /*const result = current.getTime(); */\r\n\r\n    const getDaysInMonth = (month: number, fullYear: number) => {\r\n        return new Date(fullYear, month, 0).getDate();\r\n    };\r\n\r\n    const IntDate = parseInt(date)\r\n    const untilDays = getDaysInMonth(parseInt(month), parseInt(fullYear));\r\n    const workedDays = IntDate - untilDays / 7.5\r\n\r\n\r\n    const [venda, setVenda] = useState<springPage<VendaTotalPorRota>>();\r\n\r\n    useEffect(() => {\r\n        axios.get(`${BASE_URL}/vendas/total-vendas-rota?rota=${getTokenData()?.user_name}`,\r\n            { headers: { Authorization: \"Bearer \" + getAuthData().access_token } })\r\n            .then((response) => {\r\n                setVenda(response.data);\r\n            })\r\n    }, []);\r\n\r\n    return (\r\n        <div id=\"accordion\">\r\n            {venda?.content.map(item =>\r\n                <div key={item.totalvenda} className=\"card m-3\">\r\n                    <h5 className=\"card-header bg-light text-primary text-uppercase\">Tendencia</h5>\r\n                    <div className=\"m-0 d-flex justify-content-center\">\r\n                        <h3 className=\"m-3\">{formatPrice((item.totalvenda / workedDays) * untilDays)}</h3>\r\n                        <span className=\"mt-3 mb-3 border-end d-flex flex-wrap\"></span>\r\n                        {/*////////////////////////VALOR TENDENCIA/////////////////////////////////////////////*/}\r\n                        {/* <ValorMetaTendencia /> */}\r\n                        {/*////////////////////////VALOR TENDENCIA/////////////////////////////////////////////*/}\r\n                    </div>\r\n                </div>\r\n\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DataCalc;\r\n"]},"metadata":{},"sourceType":"module"}