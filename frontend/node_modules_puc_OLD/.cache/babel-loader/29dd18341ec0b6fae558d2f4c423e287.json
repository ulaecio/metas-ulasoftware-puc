{"ast":null,"code":"import _slicedToArray from\"C:/workspace/ws-sts/ulasoftware-metas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Link}from'react-router-dom';import{getTokenData,isAuthenticated}from'utils/auth';import{removeAuthData}from'utils/storage';import React,{useEffect,useState}from'react';import history from'../../utils/history';import{ReactComponent as LogoIcon}from\"@svgr/webpack?-svgo,+titleProp,+ref!./../../assets/img/logo64px.svg\";import'./styles.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NavBarRota=function NavBarRota(){var _authData$tokenData;var _useState=useState({authenticated:false}),_useState2=_slicedToArray(_useState,2),authData=_useState2[0],setAuthData=_useState2[1];useEffect(function(){if(isAuthenticated()){setAuthData({authenticated:true,tokenData:getTokenData()});}else{setAuthData({authenticated:false});}},[]);var logout=function logout(event){event.preventDefault();removeAuthData();setAuthData({authenticated:false});history.replace('/auth/login');};return/*#__PURE__*/_jsxs(\"nav\",{className:\"nav main-nav bg-fosco fixed-top shadow-sm flex-md-row align-items-center p-0 py-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"nav-container container col-9 \",children:[/*#__PURE__*/_jsx(\"div\",{className:\"logo\",children:/*#__PURE__*/_jsx(LogoIcon,{width:\"3rem\",height:\"3rem\"})}),/*#__PURE__*/_jsx(Link,{to:\"/rota\",className:\"logo-text\",children:\"Vendas Ulasoftware\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login col-3 container text-secondary\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"nav-username\",children:(_authData$tokenData=authData.tokenData)===null||_authData$tokenData===void 0?void 0:_authData$tokenData.user_name}),authData.authenticated?/*#__PURE__*/_jsxs(\"a\",{href:\"#logout\",className:\"a\",onClick:logout,children:['-',\"Sair\"]}):/*#__PURE__*/_jsx(Link,{to:\"/auth/login\",className:\"a\",children:\"Login\"})]})]});};export default NavBarRota;","map":{"version":3,"sources":["C:/workspace/ws-sts/ulasoftware-metas/frontend/src/components/NavBarRota/index.tsx"],"names":["Link","getTokenData","isAuthenticated","removeAuthData","React","useEffect","useState","history","NavBarRota","authenticated","authData","setAuthData","tokenData","logout","event","preventDefault","replace","user_name"],"mappings":"qKAAA,OAASA,IAAT,KAAqB,kBAArB,CACA,OAASC,YAAT,CAAuBC,eAAvB,KAAyD,YAAzD,CACA,OAASC,cAAT,KAA8B,eAA9B,CACA,MAAOC,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,C,4GAEA,MAAO,cAAP,C,wFAOA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,uCACSF,QAAQ,CAAW,CAAEG,aAAa,CAAE,KAAjB,CAAX,CADjB,wCAChBC,QADgB,eACNC,WADM,eAGvBN,SAAS,CAAC,UAAM,CACd,GAAIH,eAAe,EAAnB,CAAuB,CACrBS,WAAW,CAAC,CACVF,aAAa,CAAE,IADL,CAEVG,SAAS,CAAEX,YAAY,EAFb,CAAD,CAAX,CAKD,CAND,IAOK,CACHU,WAAW,CAAC,CACVF,aAAa,CAAE,KADL,CAAD,CAAX,CAGD,CACF,CAbQ,CAaN,EAbM,CAAT,CAeA,GAAMI,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,CAAgD,CAC7DA,KAAK,CAACC,cAAN,GACAZ,cAAc,GACdQ,WAAW,CAAC,CACVF,aAAa,CAAE,KADL,CAAD,CAAX,CAGAF,OAAO,CAACS,OAAR,CAAgB,aAAhB,EACD,CAPD,CASA,mBACE,aAAK,SAAS,CAAC,mFAAf,wBACE,aAAK,SAAS,CAAC,gCAAf,wBACE,YAAK,SAAS,CAAC,MAAf,uBACE,KAAC,QAAD,EACE,KAAK,CAAC,MADR,CACe,MAAM,CAAC,MADtB,EADF,EADF,cAME,KAAC,IAAD,EAAM,EAAE,CAAC,OAAT,CAAiB,SAAS,CAAC,WAA3B,gCANF,GADF,cAWE,aAAK,SAAS,CAAC,sCAAf,wBAEE,aAAM,SAAS,CAAC,cAAhB,+BAAgCN,QAAQ,CAACE,SAAzC,8CAAgC,oBAAoBK,SAApD,EAFF,CAGGP,QAAQ,CAACD,aAAT,cACC,WACE,IAAI,CAAC,SADP,CAEE,SAAS,CAAC,GAFZ,CAGE,OAAO,CAAEI,MAHX,WAKG,GALH,UADD,cASC,KAAC,IAAD,EACE,EAAE,CAAC,aADL,CAEE,SAAS,CAAC,GAFZ,mBAZJ,GAXF,GADF,CAmCD,CA9DD,CAgEA,cAAeL,CAAAA,UAAf","sourcesContent":["import { Link } from 'react-router-dom';\r\nimport { getTokenData, isAuthenticated, Tokendata } from 'utils/auth';\r\nimport { removeAuthData} from 'utils/storage';\r\nimport React, { useEffect, useState } from 'react';\r\nimport history from '../../utils/history';\r\nimport { ReactComponent as LogoIcon } from './../../assets/img/logo64px.svg';\r\nimport './styles.css'\r\n\r\ntype AuthData = {\r\n  authenticated: boolean,\r\n  tokenData?: Tokendata\r\n}\r\n\r\nconst NavBarRota = () => {\r\n  const [authData, setAuthData] = useState<AuthData>({ authenticated: false });\r\n\r\n  useEffect(() => {\r\n    if (isAuthenticated()) {\r\n      setAuthData({\r\n        authenticated: true,\r\n        tokenData: getTokenData()\r\n      });\r\n\r\n    }\r\n    else {\r\n      setAuthData({\r\n        authenticated: false\r\n      });\r\n    }\r\n  }, [])\r\n\r\n  const logout = (event: React.MouseEvent<HTMLAnchorElement>) => {\r\n    event.preventDefault();\r\n    removeAuthData();\r\n    setAuthData({\r\n      authenticated: false\r\n    });\r\n    history.replace('/auth/login')\r\n  }\r\n\r\n  return (\r\n    <nav className='nav main-nav bg-fosco fixed-top shadow-sm flex-md-row align-items-center p-0 py-3'>\r\n      <div className='nav-container container col-9 ' >\r\n        <div className='logo'>\r\n          <LogoIcon\r\n            width='3rem' height='3rem'\r\n          />\r\n        </div>\r\n        <Link to='/rota' className='logo-text' >\r\n          Vendas Ulasoftware\r\n        </Link>\r\n      </div>\r\n      <div className='login col-3 container text-secondary'>\r\n        {/* CONDIÇÃO DE LOGIN E LOGOUT */}\r\n        <span className='nav-username'>{authData.tokenData?.user_name}</span>\r\n        {authData.authenticated ? (\r\n          <a\r\n            href='#logout'\r\n            className='a'\r\n            onClick={logout}\r\n          >\r\n            {'-'}Sair\r\n          </a>\r\n        ) : (\r\n          <Link\r\n            to='/auth/login'\r\n            className='a'\r\n          >\r\n            Login\r\n          </Link>\r\n        )}\r\n        {/* CONDIÇÃO DE LOGIN E LOGOUT */}\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default NavBarRota;"]},"metadata":{},"sourceType":"module"}